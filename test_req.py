import requests, time

# make sure you run threadbag locally 
base = "http://localhost:8081"


## Define the encoded scenarios

# Basic
p2 = "eJzdVMlu2zAU/BeeFZWkKGq5pVmaohuapEibIggoiaZVS2RAUY0dw/9earMdOW6Rorn0Jj6+ZTQzj0sgVcYrEH9fgjwDMUinLJe3Pp3gkAIHmMUdH6L2eKeq3ORKgngJ5iA+QAi7QQBhgGlIQgqp74CFjVPPjSglNIQ+8UMUYbJyQMYMawoLlvDCNj3qm+YlE80Q91U7xq1+ChuVrOTrJFtdmUVhA0v7OVG6PO6bdchii6yYsUwZW8mqipvmrm8xXB1vbt/aX4W256JMVAPl+NNlM4NlmeaVZQP4p+/988MvZj79+i1TH96cy48+0eLq3TVmXqnmJxezH9dMnuozkVydXnxuGpeqlnYuwL49ZbxglglZF4UDUiUNS013tHPu88xMQYwJccCU52JqrwhBFhAveGq4RTdhRcU3hB8mlSpqw/+OeM2EyKXou66cXmsLyba+pSwKJ3AjdhfeVRt71EUYE0i8MIo8D7cjSegSChHEnud7lARPSt233C9jnxCD+aVmsppw3TDaBh+nXHYYt9MqVeuU/84Mvdz/UN6xcwzTojPdgKEdfFYn2xg6N2xggNVqyw0QbtyACd12g9H1fjM8R5c9Tui2nuEIseyPW+9HkYsQgiHxqR04WA9Bi8LzkRfQiIQEBsFL7/yY4q2dH7P+aLm31OwUedllfRZfI4FuHMAzse+BPhhv8LAKO894b8+dlR8Yth9azZpKoTmX7U0TuOp/3kIrmZ5xfSKzJn14KrRW9+NktFo7qMrLu4In/CFvN3VwwfB5MVX3r8Vg7y40AEpYOhPaqpQdqULpNbLWC2ldsaTJayqffs8ORp5eU7Pz6g3cjAv+B2puVr8Ad8h8jw=="

# Chain 2 chain
payload = "eJzdVtty2zYQ/Rc8SyxxI0C9xXYcN03Tie3EuUzGA5IQxYgkHJCq7Xj0712KF0mUGEcz7rTjN2KBXSzOOTzAA8pNpAs0+fKAkghNUDhTSX7Nw3AaMDRC5f2NbqMwvDFFUiYmR5MHdIcmYyqJgwn2fC5dQj1KR+gewkw6kvoeJa7LfCKkx5YjFKlSVXmpCnQKNY+bmkmm4moP57fVLk7xdwzRXGW6WwTZRXmfQuABPqfGZidNsbqxCVJFocuzRQCZq89qrilx8tdlG/29OiGFUXGfBSZtJqGkiiKrC4AB8bPoXL0vZpevzLtTVZrX4ir2L+axOHpz/G36Wn3gH/zvn96a7+fix/QjP6pKZ2aRw46IwCDSqQII8kWajlBo8lKFZT2EbW6TqJyhCWFshGY6iWcwxRiGfnSqw1JDe1OVFhrKWBXHSR53gRb5F0Fh0kWpD2dgOWooho6g0HVIsWB8zXEd3kMypw7lgvgSCy6xxP5qC8y547lMCsyp8DEVYg/HTc1h/poFE3R3aVVeTLWtAF0Ft5dc1k1uLivMwob6Zyro+H46freUs0U3nKxUNq6113Y0XxQqU9erbmbbjdUS2ejs9A0/f/G+vJt9/BSZP1+d5285s/HVH5+Jopm5e3kx//ZZ5af2LA6uTi/eoeVyQ1Kuu5YUYd4eSQ0p6BB6t1XZKao2DY9jJvWjpuF7nkOkdJnrMeF7hNSKla7DuZQ+9RlziXDpf2gZfZqeyiFqyp/IIgb4PATen9KJOZaRepROMBcHugWFuJDBXMnqDbF0KCOYC18IQnywpn+b0CQvta2g3SW0nTox5Sa32K1+m+HLYPPn509n7gPMHYbkAHetuUeYKvq4uXtEOAKE4bqSyFYs2HMY8VwMUdjXY/h/YO19ctf0DdPVJ3bXnvddGDu+fOj//qu+XNrFsBgOIKanhK8jpKN46E037t/+LdQ7L78GrJ3nQks3fFgzrzJjq3W+mqkCV83JobVM2bm2L/OoWt4q0Vpz21+Ml51SiyS7SXWgfyQrJbRyaz8vZub2KG7Bq0NtQ4EK57EFAUTHJjW262wlzBBu4qBaV2XufwuNe8bXQbPzYmqx6Sc8J2g2zzbu20pPNeu7oq+aLuE5QbN1uHHv9bOjms6Kt1WzTngO0Hxd/gOReYZ/"

# http > chain > xtransfer > chain
http_node = "eJzdV9tS4zgQ/ZUpPyfGF8mXvIVwmV0GpobAMsvWFCXbiuOJbWVkGQhU/n1bvscEqOzCVi1PkVut7laf063Oo5KygGbK6K9HJQqUkTIXYnljejamM2WgiNWSVkL4WrIsEhFLldGjcq+MhpZrqJZraq7mYNOybWugrECsa6auai42TNvCru4Y9nqgBEQQeS4mHo1rkyDPxCoGF4+wvIsCMVdGjjZQ5jQK56JcZzSmvqAQnOA5baMYexmLc0H/UTSchGGUhspoRuIMjM4YTw6qEDPKIxJHD/SSy0hTJq9OeEbPabZkaSYzsoKcQWhzwumEsUUkU1hqcvoTwr1Mb8HKLKLBhHIBC5+IQqc8OGNxzO7OaRBxUO7Lx3Hc3arM/sppJiYsWXKaZWCXpYKmojmaZ/Q0FzmJL75MGyG9JXEOng85Z7yxlfMagWy0t0fvSbKMqeqzBPYSKuZMEgHSLODbZ2kKcUC+L1ounJfBKOv1oKKNPydRehP41CNuy5tCuoU4yDBVV9OwbWJk6RrWS6hc5KiOgy2MXFdDDna28GZSmYwSEkoX6l7hRM1uQ5CmJKGN0ia7ugiXcck7xgsSMHlPAjkVcq8yUW8dtLu/wUUlH1eJx2QoB18vpA8SBBIREOCjL/h8fCnu59//DNjp8Xl6hhEPr06uDWIm7P5wuvh5TdIj/jn0ro6m36ThhOUFiCZ8BDQmkIc0j+Mi8YL4ovxsq8NAuC0PhMxufVRcfq5Adsn6Zn00MJOCCTdeQGdBpz+U4i1A27Zq2hg7pu3oOlQibmrSVhEyNKQbFtSlYW5BujL6PIqVwki5v+AkzWaUy4QWwk2VirldtYzl3KcvcaFC++3Q7fNGEB6WlKtDKPx+zr1uCIquKf8yisbx/uF4Cq7XHTZpnWZrYG0HNu0E7TN0KruGYRMXWa92DWjgqgYmsWM7JjJ016j4a5oqchCGYgCxhd67afRR6jSNU65+2qckE58mrHDYg7GPxFvRy3j35rFL8l8EW3dt5ONXwXZ1pNrAIAMebVt33IZd0Kxc13BsZGAsf/9vT8Tx/u1DtDybk8X+7/gsiELx7ezs1Dm5GP86Ol46q3FwjDFH19Pvqz/ECeugXCL7vjDvlPaX34gg0JGPXn8jsItV3XSxo2OkQTsxa5e2q9ouhskNW9Bktg6R//ET8U79eaOMn7aIp+/E60/V7izbpOybPBE7Idsj0w+YXYPwmT8mw960WSPV//NSJa4/nNZcgQVnC3ku5JSmxY4UXFUXh7ASwheUH6aBVK+JDLP0XV9ZXzdEzyI5Tnv0ISpoVHO1Xk7n7G4/rP/MlKI6II/4i5ADG2C6jxlvIitY7ecZ8aSePLl18B72x7MmMf3xvM7MkwMfKTUblxv2Zo0mNU9G2k3WtAc+Umq6dxv2G3aPNe141mNNe+AjpWbjcsPe0NJnTfvIbbKmPfARUvNj/Teu7M64"

# 1 dot from polkadot 2 assethub 
polkadot_to_assethub = "eJzdVdtS2zAQ/Rc9B1d2LF/yxi1QStshCQToMIxsy4qJbYEsl4SM/73r2E5Sh7RDS1/6kpFWq93jPUcnC5SKgGWo922BogD1kD+hUXpPrNBwLNRBav7ImihsH0UWqUikqLdAM9Tb03VDs22MbcNyTMfCFumgOcStruZalmk5mJjE0V3DLDoooIqWF2PqsRiKHtZFo4Tyson2YdlGy75ziKY0YaskuJ2peQyBBSxDIZOjuliFrAfI4ikNhIKbNMuYKs/qEs3R0fr0I3wqhprzxBMllKOvo7IHDQLJMpgGIv1zMti/VLPJ9U0gPp8M0i/ElHz86dag3UTMjofTh1ua9uUp98b94UVZOBF5Cn2RDpuAxRQGkeZx3EG+SBX1VbWFNs9RoCaoZ5hmB01YxCdwZJo64GEx8xUDcCGNM7ae976XiThX7M/mLinnUcrrqkWnphogQel7i7pOiNdcV+Ftsg2CNWzrNjG7DvziqqWBNWLpJja6RLcN13VeIbquuJvEOqGHZiNJ0yxkspznMvhzyqiCuJmWiVz67FdSqMl+P3LbslFU8kpxDYRl39Pc24RQaWEDxWkwoJfZZHQiLvpUiTN7zN3hlNsH54cP4Rm9Ilfu080X8TSwX8JrcoCKYkM7GK+1Y5jWpnaUzHdL5w0s7pBN5RDUcHUa/NYhiAOVdd0lOoAkdrdb6dTWNYJBtV2ImA42X1PNu9pDm5ANe2hzVPwVSWupVHz/WyN4y3hbdN51EAv4Luvfa5tD88y2/iBq7W+5SUMILKSYlje5ZCxdnpSBcf3tAC2hcsrkcRqU6Y0LSSme28l6sdJbFiWPMfPYS7R0gUY0zXI4Ec8HvHkLVagB5FF/yiWQFByKWMgVsqV0/DyjXplX3nzdKvdaL2A1mi1DbWbTvvA/jOau+AGqvZtZ";

# test_p  
test_p = "eJzdVW1X2jAU/i/5XLumbdqUb76hc84dAUXd8XhSGkKlbTQNA+Tw33dLW0CQ7bjNL/uW3NyXJ/d5cjNDmYx4jhrfZyiOUAP1BizOHojXt6mHDKSnT7y2wvZJ5rGOZYYaMzRBjT2MPZNS23EIobbrBtg20BTsvm3iwAoCh7qBTyglcwNFTLMiLmEhTyDnYZUzTpkoapifFlXM/IcAa8ZSvnSC6FxPEzDMYNmXKj2qkpXAGgAsGbJIaohkec51cValqI+OVqef4aYW5JymoSygHH3rFDVYFCmeQzMQaZ6T1v6VngxubiP59aSVXRBXie6XO5s5qZwct4ePdyxrqlMRdpvtyyJxKkcZ1EUYNhFPGPQhGyWJgXoy06ynyy2UGceRHqAG9MtAAx6LARy5LgY8POE9zQFcnyU5X7V7P8xlMtL8j9qumBBxJqqkc6MiGhBB5gePBbRvrZguzdtU44CaNvFtF1Pfxg4JqpIOBrODsYWJT6nrWd4bVFdJd9NYOTTQpKNYlve5Kjq6ML526ZQo191yOVI9/isxVHT/O3pfCecV23AvzZQoBVjjWYA4HYXreEpprEE6jVrsKh90TuRlk2l55ndF0B4K/+D88LF/xq7JdfB8eyGfW/5L/4YcoPl8TUqWtZKS7XrrUtJqtFtJ72N1h5LKkcHsALPotyODUMskGAcEA07iO06lXGwSy/KIAxaXWi796IGxycnawNikaf5XPK2kU1L+saPhPe3doPPeQDwSu/6Cvc15UT+7rR+jkv/WgKkJgYWSwyJSKM6zxUlh6FZ3B2gpU0OujrOocK8Hk1JyvOmM50u95XH6lPCQv8SLqVCLpl62B3J8IOrnUJpqQCHrDYUCkqJDmUi1RLaQTm+Us7DwKyLfnp57Gy9g2ZqtGVv3ZjPgf2jN/fwnSeCgtQ==";

remark_data = "eJzdVl1z2jgU/SsZP+3OgGtbkiXzRoBsNzSZNIHQptPpyLaw3dgWkU2BZPjvK4ENxoQmaba7M3nTx726H+dIOg9ayn2Waa0vD1rkay2NennE028uwsSAWkPLFxO2WZbzCc+i1bD1oM21VhObtm5jG2MbYQAdAze0hVy2sY4dgGwMEIKOYy4bmk9zqrxi6rJ4e6TcyfJFLIM8yOGYi6RbGBYGLe2SJVTcyuDrld39wTpBUdpkfCo8dZrmhTRS7jTLWP5+6qoD1PBvVadpATX3fcEyWb6G/nIzfGrei/P5x4vPN/ymPRzMr+mdmwy6dCyii3ki5m06mx1/TPocBMo54dM035yVLRKXx5tpTkXA1O44no7Hqsxy5anMDGM3sy6+HOAfd8FNf8j7c3FxFoXn7NPxfSiS0XcfJWwixsOTMBfDD6cwDaqpjHqD99pyKYPPIj8PtRYgqKGFLApCmYhlG9KWxczLmYyciynbAtx2Mx5Pc/YLQAsaBJFMpDWmccaWjYJaq6q/YUqJ622Zte7FPrEcx9FtQx5LEHGACa11POLoJnAsAwIMETQweYRZneLIKKGBCqG/WwXRsx+qOSlN2MboMPsOYaT2iiMKDtU4tcOD5b/LMZ/FVHYhncZxQ/N4mss7sJ5uIbYg3EIMgVOFeAXIYYxf0vOfguzYxPDw0yBbGOumYWKCke1YBBekMiHUoQ2gjGVDAwEL/Y8ojwSdTJh/1MtDJh65qbXL9sqr+98C/qL+/xRxF9um5z6JOIDyvcDQkBSzHVSEI0S+IZZNECLQQb8d63AhS+nOH4F6eNU96vAoPfqj7dGYHo2kd8hj9ucO7LgKunTp1EA/cT8JE/aCqN/5PklvrpjfPw9PrsHlZUR6p/O7s8/g2OQfrq2z9ln7PKuAvob592L+XAQOoF3oA0glN8ZP6wNEdAMRQkxg24bj2GAVDyPdgRgY0AIGhoDAV8mD+UDQNBuvL+dhhVA1e65IeP1XfEgklI/Fviio0XNDuVcxrMbXiiKwDKOiCCB5PpNegG2NTF8bGvODquysaoNmXYOWaO0piFJi7TkUjJEDwW+VZyAYS1c7amFUlC5TU6qRiV7qK/OSzELwWd1YKZtiP4uSScxcdh+tyFQythxehXx2HJR6ar1UJuRS7zYQkhJ+h8dcbDJbcdubZtRVdsqzfuPWxTVr/+umNXu6vexN3eEttaZaW7P+MtVYs5UkNdZsHd5Sa3aKa9b+6Dprtq/5Lmu2Dm+hNV+X/wD/v7kx"


# swap > xtransfer
hydra_swap_xtransfer = "eJzdVltv0zAU/iuTn0Bqg5342rfRAQMmBNoGE2ianMRNw9K42Om6bup/x2mSZU13UYEJaW/xOT6XfN93TnINch0rCwY/rkEagwGIxjLNzyBRjFLQA8ViqhqrO061TYtU52BwDS7BoI+J70EfBZQSEZAA9cDCWX3uQYGQzxmmnGKfsGUPxLKQZVgmQ5W5lMM6ZTqRSVnCe7Uq4tmLxFlzOVE3l1y0LRaZM1y7x5E2k706WdXXAIwXsZF7ly5QWquK0lVnOD7cO9p58Vln5zLWxc5u6d7Zn4Uvm7vvy7dG0B3tYhLqrI4pi8o4Nso6cAB59/1k+OHi5yhPh8ODycd08evq5CCeJ9Fhkn75dFzY2duvYzO9GP3U08PxQZl8ome56wT4yJ1ilUkHTT7Lsh6IdF7IqKiOrs48jYsxGPgY98BYpcnYuTB2YFqVqahQrsORzKxq8d8Nrc5mhfoTHoxMkjRP6pzLXk28a8glPmNKRUK0zFfmO6hHFHoQMSYw5Bxxn5KqKAo8xmlAiM8oZARycgf5ddb7ia0vDICdy2mJ5uq87j2qOqxvWD0zkXpAFC3R/5DXDc0U0iSVAB9qY72L23n2907ActmKIqB+KwqC/C1EsR1D98ii2geRjKFUj+4DxgNPcEKpEBQ6ubGqIMVewKEzUwghhgg99TpYAe2G/I59cJuGevzWiGjorSb1acd2G7genlpOQ47Y41NLXEWMMRRBwF11IVYVfeqsnAtBoGDMRxz/1cheHhmZ25Ey4BZIELYgIbaFjLdp+UENk9iHQfiohn1OPI6w8DkiLMAsaFghnnCFKMUII0jFf/ym7a88JxsbZX2JPKmwCzO7n7KtIOxwdtoDKk7u+yPpd79Szdbf+G+p1/DGZ60B3T0YfV5GJkapfOUpDd/qd3etTaQ5V+ZNHpfXm8EyRs+7l8sBrf02nUwzFaqr1Mm/dyOM5vFwrOevkwa+ytQ0FMroPDGOpHioM21uOlvJI5pZGZb3ysi7p7/fWdU30GzsiAabbsAzhKbivd/ZAF1o2p+edWjagOcEze1363fF0Rmodml2BqoNeA7QnC5/A5kPHT4="

## Upload a scenario to threadbag
print("Creating scenario..")
xx = requests.post(base+"/saveUrl", json={"url": hydra_swap_xtransfer})
print("Response: ")
print(xx.text)
s = xx.json()
# save the scenario id
scenario_id = s.get('shortUrl', 'not found')
print("Scenario id saved as:", scenario_id)


### Start the synchronous persistance execution of the scenario
print("Starting job: ")
js = requests.post(base+"/job/start", json={"id": scenario_id})
# {'success': True, 'result': 'Job started'}
print("start job response:", js.json())
print("sleeping for 10 seconds.. ")
time.sleep(10)

## Query logs for our scenario
print("Quering logs for: ", scenario_id)
logs = requests.post(base+"/scenario/worker/logs", json={"id": scenario_id})
# example output:
#{"success":true,"result":["Starting worker","Decoding payload..","Parsed scenario data","Making http request: Url: https://example.com Method: post","Building http request","Building ChainNode request","Drafting xTransfer tx from polkadot to assetHub"]}
print("Logs returned: ", logs.text)

## Query for the transaction que 
txmempool = requests.post(base+"/scenario/tx", json={"id": scenario_id})

print("Getting transaction queue: ", txmempool.text)